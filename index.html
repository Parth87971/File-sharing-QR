<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR File Share</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsQR/1.4.0/jsQR.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useRef, useEffect } = React;

    const SrOnly = ({ children }) => (
      <span style={{ position: 'absolute', width: 1, height: 1, padding: 0, margin: -1, overflow: 'hidden', clip: 'rect(0,0,0,0)', whiteSpace: 'nowrap', border: 0 }}>{children}</span>
    );

    const QRFileShareApp = () => {
      const [activeTab, setActiveTab] = useState('send');
      const [selectedFile, setSelectedFile] = useState(null);
      const [qrCode, setQrCode] = useState('');
      const [isDragging, setIsDragging] = useState(false);
      const [uploadProgress, setUploadProgress] = useState(0);
      const [isScanning, setIsScanning] = useState(false);
      const [scanResult, setScanResult] = useState(null);
      const [notification, setNotification] = useState(null);
      const [isGenerating, setIsGenerating] = useState(false);
      const [decodedChunks, setDecodedChunks] = useState({});
      const [fileMetadata, setFileMetadata] = useState({ chunks: 0 });
      const [userMessage, setUserMessage] = useState('Ready to transfer data.');
      const fileInputRef = useRef(null);
      const videoRef = useRef(null);
      const canvasRef = useRef(null);
      const streamRef = useRef(null);
      const qrContainerRef = useRef(null);

      useEffect(() => {
        let cleanupStream = () => {
          if (streamRef.current) {
            console.log("Cleaning up camera stream...");
            streamRef.current.getTracks().forEach(track => track.stop());
            streamRef.current = null;
          }
        };
        return cleanupStream;
      }, []);

      const showNotification = (message, type = 'info') => {
        setNotification({ message, type });
        setTimeout(() => setNotification(null), 3500);
      };

      const formatFileSize = (bytes) => {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      };

      const getFileIcon = (type) => {
        if (!type) return <i className="fas fa-file w-8 h-8" aria-hidden="true"></i>;
        if (type.startsWith('image/')) return <i className="fas fa-image w-8 h-8" aria-hidden="true"></i>;
        if (type.startsWith('video/')) return <i className="fas fa-file-video w-8 h-8" aria-hidden="true"></i>;
        if (type.startsWith('text/')) return <i className="fas fa-file-text w-8 h-8" aria-hidden="true"></i>;
        return <i className="fas fa-file w-8 h-8" aria-hidden="true"></i>;
      };

      const handleFileSelect = (e) => {
        const file = e.target.files?.[0];
        if (file) processFile(file);
      };

      const handleDrop = (e) => {
        e.preventDefault();
        setIsDragging(false);
        const file = e.dataTransfer.files[0];
        if (file) processFile(file);
      };

      const handleDragOver = (e) => {
        e.preventDefault();
        setIsDragging(true);
      };

      const handleDragLeave = (e) => {
        e.preventDefault();
        setIsDragging(false);
      };

      const onDropZoneKeyDown = (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          fileInputRef.current?.click();
        }
      };

      const processFile = (file) => {
        setSelectedFile(file);
        setIsGenerating(true);
        setUploadProgress(0);
        setDecodedChunks({});
        setFileMetadata({ chunks: 0 });
        setUserMessage(`Processing ${file.name} for transfer...`);
        generateChunks(file);
      };

      const generateChunks = (file) => {
        const chunkSize = 2000; // Max ~2953 bytes, leave room for JSON overhead
        const totalChunks = Math.ceil(file.size / chunkSize);
        setFileMetadata({ chunks: totalChunks });
        setUploadProgress(10); // Start progress

        const reader = new FileReader();
        let chunks = [];
        let offset = 0;

        reader.onload = (e) => {
          chunks.push(e.target.result);
          offset += chunkSize;
          if (offset < file.size) {
            readNextChunk();
          } else {
            setUploadProgress(50); // Chunking complete
            startTransfer(chunks, totalChunks, file.name, file.type);
          }
        };

        const readNextChunk = () => {
          const slice = file.slice(offset, offset + chunkSize);
          reader.readAsArrayBuffer(slice);
        };

        readNextChunk();
      };

      const startTransfer = (chunks, totalChunks, fileName, fileType) => {
        let currentChunk = 0;
        const interval = setInterval(() => {
          if (currentChunk < totalChunks) {
            const chunkData = chunks[currentChunk];
            const qrData = {
              chunk: currentChunk,
              total: totalChunks,
              data: Array.from(new Uint8Array(chunkData)),
              name: fileName,
              type: fileType
            };
            generateQR(JSON.stringify(qrData));
            currentChunk++;
            setUploadProgress(50 + (currentChunk / totalChunks) * 50);
          } else {
            clearInterval(interval);
            setIsGenerating(false);
            showNotification('Transfer complete! Scan all QR codes.', 'success');
          }
        }, 2000); // 2-second delay between QR generations
      };

      const generateQR = (data) => {
        let qrContainer = document.getElementById('qr-container');
        if (!qrContainer) {
          qrContainer = document.createElement('div');
          qrContainer.id = 'qr-container';
          qrContainer.style.display = 'none';
          document.body.appendChild(qrContainer);
        }
        qrContainer.innerHTML = '';
        if (window.QRCode && data.length < 2953) {
          new window.QRCode(qrContainer, {
            text: data,
            width: 300,
            height: 300,
            colorDark: '#000000',
            colorLight: '#ffffff',
            correctLevel: window.QRCode?.CorrectLevel?.H
          });
          setTimeout(() => {
            const canvas = qrContainer.querySelector('canvas');
            const img = qrContainer.querySelector('img');
            if (canvas) {
              setQrCode(canvas.toDataURL());
            } else if (img) {
              setQrCode(img.src);
            }
          }, 100);
        } else {
          showNotification('Data too large for QR.', 'error');
        }
      };

      const stopTransfer = () => {
        setIsGenerating(false);
        setUploadProgress(0);
        setQrCode('');
        showNotification('Transfer stopped.', 'info');
      };

      const startScanner = async () => {
        console.log("Starting scanner...");
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ 
            video: { facingMode: 'environment' }
          }).catch(() => navigator.mediaDevices.getUserMedia({ video: true }));
          console.log("Camera stream obtained:", stream);
          if (videoRef.current) {
            videoRef.current.srcObject = stream;
            videoRef.current.play().catch(err => console.error("Play error:", err));
            videoRef.current.muted = true;
            streamRef.current = stream;
            setIsScanning(true);
            setUserMessage('Scanning for QR codes...');
            scanQRCode();
          }
        } catch (err) {
          console.error("Camera error:", err.name, err.message);
          showNotification('Camera access failed: ' + err.message + '. Check permissions.', 'error');
        }
      };

      const stopScanner = () => {
        if (streamRef.current) {
          streamRef.current.getTracks().forEach(track => track.stop());
          streamRef.current = null;
        }
        setIsScanning(false);
        setUserMessage('Scanner stopped.');
      };

      const scanQRCode = () => {
        if (!isScanning || !videoRef.current || !canvasRef.current) return;

        const video = videoRef.current;
        const canvas = canvasRef.current;
        const ctx = canvas.getContext('2d');

        if (video.readyState === video.HAVE_ENOUGH_DATA) {
          canvas.height = video.videoHeight;
          canvas.width = video.videoWidth;
          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

          if (window.jsQR) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const code = window.jsQR(imageData.data, imageData.width, imageData.height);

            if (code) {
              try {
                const data = JSON.parse(code.data);
                if (data.chunk !== undefined && data.total !== undefined && data.data) {
                  setDecodedChunks(prev => {
                    if (!prev[data.chunk]) {
                      const newChunks = { ...prev, [data.chunk]: data.data };
                      if (Object.keys(newChunks).length === data.total) {
                        assembleFile(newChunks, data.name, data.type);
                      }
                      return newChunks;
                    }
                    return prev;
                  });
                  setFileMetadata({ chunks: data.total });
                  showNotification(`Chunk ${data.chunk + 1} of ${data.total} received.`, 'success');
                }
              } catch (e) {
                console.error("JSON parse error:", e);
              }
            }
          }
        }

        requestAnimationFrame(scanQRCode);
      };

      const assembleFile = (chunks, fileName, fileType) => {
        const sortedChunks = Object.values(chunks).sort((a, b) => a.chunk - b.chunk);
        const byteArrays = sortedChunks.map(chunk => new Uint8Array(chunk));
        const fullArray = new Uint8Array(byteArrays.reduce((acc, curr) => acc.concat(Array.from(curr)), []));
        const blob = new Blob([fullArray], { type: fileType });
        const url = URL.createObjectURL(blob);
        setScanResult({ name: fileName, data: url });
        showNotification(`${fileName} assembled! Click Download.`, 'success');
      };

      const downloadFile = () => {
        if (!scanResult) return showNotification('No file to download.', 'error');
        if (scanResult.data && scanResult.data.startsWith('blob:')) {
          const link = document.createElement('a');
          link.href = scanResult.data;
          link.download = scanResult.name;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(scanResult.data); // Cleanup
          showNotification(`${scanResult.name} downloaded!`, 'success');
        } else {
          showNotification('No downloadable file available.', 'error');
        }
      };

      const copyShareLink = () => {
        const link = `https://parth87971.github.io/qr-file-share/?file=${encodeURIComponent(selectedFile?.name || 'unknown')}`;
        navigator.clipboard.writeText(link);
        showNotification('Link copied to clipboard!', 'success');
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-600 p-4 relative overflow-hidden">
          <a href="#main-content" className="sr-only-focusable">Skip to main content</a>

          <div className="absolute inset-0" aria-hidden="true">
            <div className="absolute top-20 left-20 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob" />
            <div className="absolute top-40 right-20 w-72 h-72 bg-yellow-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000" />
            <div className="absolute bottom-20 left-1/2 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000" />
          </div>

          <main id="main-content" className="relative z-10 max-w-6xl mx-auto" tabIndex={-1}>
            <header className="text-center mb-8 animate-fadeInDown" aria-labelledby="app-title">
              <div className="inline-flex items-center justify-center mb-4">
                <div className="relative">
                  <div className="absolute inset-0 bg-white rounded-full blur-xl opacity-50 animate-pulse" aria-hidden="true"></div>
                  <i className="fas fa-qrcode w-16 h-16 text-white relative" aria-hidden="true"></i>
                </div>
              </div>
              <h1 id="app-title" className="text-5xl font-bold text-white mb-2 tracking-tight">QR File Share</h1>
              <p className="text-blue-100 text-lg flex items-center justify-center gap-2">
                <i className="fas fa-sparkles w-5 h-5" aria-hidden="true"></i>
                Lightning-fast file transfer with QR codes
                <i className="fas fa-sparkles w-5 h-5" aria-hidden="true"></i>
              </p>
            </header>

            <section aria-label="Features" className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
              {[{ icon: <i className="fas fa-bolt w-5 h-5" aria-hidden="true"></i>, text: 'Instant Transfer' }, { icon: <i className="fas fa-shield-alt w-5 h-5" aria-hidden="true"></i>, text: 'Secure & Private' }, { icon: <i className="fas fa-wifi w-5 h-5" aria-hidden="true"></i>, text: 'No Internet Needed' }, { icon: <i className="fas fa-mobile w-5 h-5" aria-hidden="true"></i>, text: 'Cross-Platform' }].map((feature, i) => (
                <div key={i} className="bg-white/10 backdrop-blur-sm rounded-xl p-3 flex items-center gap-2 text-white animate-fadeInUp" style={{ animationDelay: `${i * 100}ms` }}>
                  {feature.icon}
                  <span className="text-sm font-medium">{feature.text}</span>
                </div>
              ))}
            </section>

            <section className="bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl p-8 animate-fadeIn" aria-labelledby="main-heading">
              <h2 id="main-heading" className="sr-only">Main file sharing controls</h2>

              <div className="flex gap-3 mb-8" role="tablist" aria-label="Send or receive files">
                <button role="tab" aria-selected={activeTab === 'send'} onClick={() => setActiveTab('send')} className={`flex-1 flex items-center justify-center gap-2 py-3 px-6 rounded-xl font-semibold transition-all duration-300 ${activeTab === 'send' ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg transform scale-105' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>
                  <i className="fas fa-upload w-5 h-5" aria-hidden="true"></i>
                  Send File
                </button>
                <button role="tab" aria-selected={activeTab === 'receive'} onClick={() => setActiveTab('receive')} className={`flex-1 flex items-center justify-center gap-2 py-3 px-6 rounded-xl font-semibold transition-all duration-300 ${activeTab === 'receive' ? 'bg-gradient-to-r from-blue-600 to-cyan-600 text-white shadow-lg transform scale-105' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>
                  <i className="fas fa-download w-5 h-5" aria-hidden="true"></i>
                  Receive File
                </button>
              </div>

              {activeTab === 'send' && (
                <div className="space-y-6 animate-fadeIn">
                  <div
                    role="button"
                    tabIndex={0}
                    aria-label="File upload area. Press Enter or Space to open file picker."
                    aria-describedby="upload-desc"
                    className={`border-3 border-dashed rounded-2xl p-12 text-center transition-all duration-300 cursor-pointer ${isDragging ? 'border-purple-500 bg-purple-50 transform scale-105' : 'border-gray-300 hover:border-purple-400 hover:bg-gray-50'}`}
                    onDrop={handleDrop}
                    onDragOver={handleDragOver}
                    onDragLeave={handleDragLeave}
                    onClick={() => fileInputRef.current?.click()}
                    onKeyDown={onDropZoneKeyDown}
                  >
                    <input
                      ref={fileInputRef}
                      type="file"
                      id="file-input"
                      onChange={handleFileSelect}
                      className="hidden"
                      aria-label="Choose a file to upload"
                    />
                    <i className="fas fa-upload w-16 h-16 mx-auto mb-4 text-purple-500 animate-bounce" aria-hidden="true"></i>
                    <h3 className="text-xl font-semibold text-gray-800 mb-2">Drop your file here</h3>
                    <p className="text-gray-500">or press Enter / Space to browse from your device</p>
                    <p id="upload-desc" className="text-sm text-gray-400 mt-2">Maximum file size: 100MB</p>
                  </div>

                  {uploadProgress > 0 && uploadProgress < 100 && (
                    <div className="animate-fadeIn">
                      <div className="flex justify-between text-sm text-gray-600 mb-2">
                        <span>Generating Chunks...</span>
                        <span>{Math.round(uploadProgress)}%</span>
                      </div>
                      <div className="h-3 bg-gray-200 rounded-full overflow-hidden" role="progressbar" aria-valuemin={0} aria-valuemax={100} aria-valuenow={uploadProgress} aria-label="Chunk generation progress">
                        <div className="h-full bg-gradient-to-r from-purple-500 to-blue-500 transition-all duration-300 relative" style={{ width: `${uploadProgress}%` }}>
                          <div className="absolute inset-0 bg-white/30 animate-shimmer" aria-hidden="true"></div>
                        </div>
                      </div>
                    </div>
                  )}

                  {selectedFile && qrCode && (
                    <div className="space-y-6">
                      <div className="bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-6">
                        <h3 className="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                          <i className="fas fa-file-text w-5 h-5 text-purple-600" aria-hidden="true"></i>
                          Data Sender Mode
                        </h3>
                        <p className="text-gray-600 mb-4">{userMessage}</p>
                        <div className="text-center">
                          <p className="text-sm text-gray-500 mb-2">Progress: {isGenerating ? Object.keys(decodedChunks).length : 0} / {fileMetadata.chunks || 0}</p>
                          <button onClick={() => processFile(selectedFile)} disabled={isGenerating} className="inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                            <i className="fas fa-play w-5 h-5" aria-hidden="true"></i>
                            <span>Start Transfer</span>
                          </button>
                          <button onClick={stopTransfer} disabled={!isGenerating} className="ml-4 inline-flex items-center gap-2 px-8 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                            <i className="fas fa-stop w-5 h-5" aria-hidden="true"></i>
                            <span>Stop Transfer</span>
                          </button>
                        </div>
                      </div>
                      <div className="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 text-center">
                        <h3 className="font-semibold text-gray-800 mb-4">Scan to Download</h3>
                        {isGenerating ? (
                          <div className="relative inline-block">
                            <div className="absolute inset-0 bg-gradient-to-r from-purple-400 to-blue-400 rounded-xl blur-xl opacity-30 animate-pulse" aria-hidden="true"></div>
                            <img
                              id="generated-qr"
                              tabIndex={-1}
                              src={qrCode}
                              alt={`QR code for ${selectedFile.name} chunk.`}
                              className="relative w-64 h-64 mx-auto rounded-xl shadow-lg p-4 bg-white"
                            />
                          </div>
                        ) : (
                          <div className="w-64 h-64 mx-auto bg-gray-200 rounded-xl animate-pulse" aria-hidden="true"></div>
                        )}
                        <p className="text-sm text-gray-500 mt-4">Scan each QR code to receive data</p>
                      </div>
                    </div>
                  )}
                </div>
              )}

              {activeTab === 'receive' && (
                <div className="space-y-6 animate-fadeIn">
                  <div className="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6">
                    <h3 className="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                      <i className="fas fa-download w-5 h-5 text-blue-600" aria-hidden="true"></i>
                      Data Receiver Mode
                    </h3>
                    <p className="text-gray-600 mb-4">{userMessage}</p>
                    <div className="text-center">
                      <p className="text-sm text-gray-500 mb-2">Progress: {Object.keys(decodedChunks).length} / {fileMetadata.chunks || 0}</p>
                      <button onClick={startScanner} disabled={isScanning} className="inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                        <i className="fas fa-play w-5 h-5" aria-hidden="true"></i>
                        <span>Start Receiver</span>
                      </button>
                      <button onClick={stopScanner} disabled={!isScanning} className="ml-4 inline-flex items-center gap-2 px-8 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <i className="fas fa-stop w-5 h-5" aria-hidden="true"></i>
                        <span>Stop Receiver</span>
                      </button>
                    </div>
                  </div>

                  {isScanning && (
                    <div className="relative rounded-2xl overflow-hidden bg-black">
                      <video ref={videoRef} autoPlay playsInline muted className="w-full h-auto object-cover" aria-label="Camera viewfinder for scanning QR codes" />
                      <canvas ref={canvasRef} className="hidden" aria-hidden="true" />
                      <div className="absolute inset-0 border-2 border-white/30 m-12 rounded-lg animate-pulse" aria-hidden="true"></div>
                      <div className="absolute top-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm">Scanning for QR code...</div>
                    </div>
                  )}

                  {scanResult && (
                    <div className="bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-6 animate-fadeInUp">
                      <div className="flex items-center gap-2 mb-4">
                        <i className="fas fa-check w-6 h-6 text-green-600" aria-hidden="true"></i>
                        <h3 className="font-semibold text-gray-800">File Received!</h3>
                      </div>
                      <div className="bg-white rounded-xl p-4 mb-4">
                        <div className="flex items-center gap-3">
                          <div className="p-2 bg-gradient-to-br from-blue-100 to-cyan-100 rounded-lg">{getFileIcon(scanResult.type)}</div>
                          <div className="flex-1">
                            <p className="font-medium text-gray-800">{scanResult.name}</p>
                            <p className="text-sm text-gray-500">{formatFileSize(new Blob([new Uint8Array(scanResult.data)]).size)}</p>
                          </div>
                        </div>
                      </div>
                      <button onClick={downloadFile} className="w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all">
                        <i className="fas fa-download w-5 h-5" aria-hidden="true"></i>
                        <span>Download File</span>
                      </button>
                    </div>
                  )}
                </div>
              )}
            </section>

            <section className="mt-12 bg-white/90 backdrop-blur-md rounded-3xl p-8 animate-fadeInUp" aria-labelledby="how-title">
              <h2 id="how-title" className="text-2xl font-bold text-gray-800 mb-6 text-center">How It Works</h2>
              <div className="grid md:grid-cols-3 gap-6">
                {[{ step: '1', title: 'Select File', description: 'Choose any file from your device', icon: <i className="fas fa-upload w-6 h-6" aria-hidden="true"></i> }, { step: '2', title: 'Generate QR', description: 'Create QR codes for chunks', icon: <i className="fas fa-qrcode w-6 h-6" aria-hidden="true"></i> }, { step: '3', title: 'Scan & Download', description: 'Scan all chunks to receive', icon: <i className="fas fa-download w-6 h-6" aria-hidden="true"></i> }].map((item, i) => (
                  <div key={i} className="relative">
                    <div className="text-center">
                      <div className="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-full mb-4 shadow-lg">{item.icon}</div>
                      <h3 className="font-semibold text-gray-800 mb-2">{item.title}</h3>
                      <p className="text-sm text-gray-600">{item.description}</p>
                    </div>
                    {i < 2 && <i className="fas fa-chevron-right hidden md:block absolute top-8 -right-3 w-6 h-6 text-gray-400" aria-hidden="true"></i>}
                  </div>
                ))}
              </div>
            </section>
          </main>

          <div aria-live="polite" aria-atomic="true" className="fixed bottom-4 right-4">
            {notification && (
              <div role="status" className={`flex items-center gap-2 px-6 py-3 rounded-xl shadow-lg ${notification.type === 'success' ? 'bg-green-500' : notification.type === 'error' ? 'bg-red-500' : 'bg-blue-500'} text-white`}>
                {notification.type === 'success' && <i className="fas fa-check w-5 h-5" aria-hidden="true"></i>}
                {notification.type === 'error' && <i className="fas fa-times w-5 h-5" aria-hidden="true"></i>}
                {notification.type === 'info' && <i className="fas fa-exclamation-circle w-5 h-5" aria-hidden="true"></i>}
                <span className="font-medium">{notification.message}</span>
              </div>
            )}
          </div>

          <style>{`
            .sr-only-focusable { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; z-index: -1; }
            .sr-only-focusable:focus { position: static; width: auto; height: auto; left: auto; top: auto; z-index: 9999; }

            @media (prefers-reduced-motion: reduce) {
              .animate-blob, .animate-fadeIn, .animate-fadeInUp, .animate-fadeInDown, .animate-slideInUp, .animate-shimmer { animation: none !important; }
            }

            @keyframes blob { 0% { transform: translate(0px, 0px) scale(1); } 33% { transform: translate(30px, -50px) scale(1.1); } 66% { transform: translate(-20px, 20px) scale(0.9); } 100% { transform: translate(0px, 0px) scale(1); } }
            @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
            @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
            @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
            @keyframes slideInUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
            @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

            .animate-blob { animation: blob 7s infinite; }
            .animation-delay-2000 { animation-delay: 2s; }
            .animation-delay-4000 { animation-delay: 4s; }
            .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
            .animate-fadeInUp { animation: fadeInUp 0.5s ease-out; }
            .animate-fadeInDown { animation: fadeInDown 0.5s ease-out; }
            .animate-slideInUp { animation: slideInUp 0.3s ease-out; }
            .animate-shimmer { animation: shimmer 2s infinite; }

            :focus { outline: 3px solid rgba(99,102,241,0.8); outline-offset: 2px; }
            #generated-qr { padding: 10px; background: #ffffff; }
            video { width: 100%; height: auto; display: block; object-fit: cover; }
            .relative.rounded-2xl { position: relative; overflow: hidden; }
            @media (max-width: 640px) {
              video { width: 100% !important; height: auto !important; position: absolute; top: 0; left: 0; }
              .relative.rounded-2xl { padding-top: 75%; position: relative; }
            }
          `}</style>
        </div>
      );
    };

    ReactDOM.render(<QRFileShareApp />, document.getElementById('root'));
  </script>
</body>
</html>